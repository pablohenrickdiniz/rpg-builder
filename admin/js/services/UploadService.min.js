app.service("UploadService",["$http",function(b){var a=this;a.fileQueue=[];a.uploading=false;a.executeUploads=function(){if(a.fileQueue.length>0){a.uploading=true;var c=a.fileQueue.pop();a.upload(c.fields,c.url,function(d){if(typeof c.success==="function"){c.success(d.data)}a.executeUploads()},function(d){if(typeof c.error==="function"){c.error(d.data)}a.executeUploads()})}else{a.executing=false}};a.upload=function(c,e,g,d){c=c===undefined?{}:c;var f=new FormData();Object.keys(c).forEach(function(h){f.append(h,c[h])});b({method:"POST",url:e,data:f,withCredentials:true,transformRequest:angular.identity,headers:{"Content-Type":undefined}}).then(g,d)};a.queue=function(c){a.fileQueue.push(c);if(!a.executing){a.executeUploads()}}}]);