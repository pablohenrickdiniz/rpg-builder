app.service("TaskService",["$localStorage","$timeout","TASK",function(b,c,d){var a=this;a.executing=false;a.registeredActions=[];a.paused=false;a.initialize=function(){console.log("task initialized...");a.executeTasks()};a.executeTasks=function(){if(b.tasks&&b.tasks.length>0&&!a.paused){a.executing=true;var e=b.tasks[0];if(a.registeredActions[e.action]!==undefined){var f=a.registeredActions[e.action];console.log("executing task "+e.action);f(e.data,function(){b.tasks.splice(0,1);a.executeTasks()},function(){console.log("task failed, restart in "+(d.RESTART_TIME/1000)+" seconds");c(function(){a.executeTasks()},d.RESTART_TIME)})}else{b.tasks.splice(0,1);console.log("task action "+e.action+" not binded");a.executeTasks()}}else{a.executing=false}};a.add=function(e){if(b.tasks===undefined){b.tasks=[]}if(e.action){b.tasks.push(e)}else{console.log("task action not defined!")}if(!a.executing){a.executeTasks()}};a.on=function(e,f){a.registeredActions[e]=f;return a};a.pause=function(){a.paused=true}}]);