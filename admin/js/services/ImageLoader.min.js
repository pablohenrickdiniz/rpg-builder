app.factory("ImageLoader",function(){var a={loadedImages:[],loadAll:function(c,d){b(c,[],d)},load:function(f,g){var e=this;var c=document.createElement("a");c.href=f;f=angular.element(c).prop("href");if(e.loadedImages[f]===undefined){var d=new Image();d.crossOrigin="Anonymous";d.src=f;d.onload=function(){e.loadedImages[f]=d;g(d)}}else{g(e.loadedImages[f])}},toDataURL:function(c,g){var d=document.createElement("canvas");var e=d.getContext("2d");d.width=c.width;d.height=c.height;e.drawImage(c,0,0);var f=d.toDataURL();g(f);d=null}};var b=function(c,e,f){e=e===undefined?[]:e;if(c.length>0){var d=c.shift();a.load(d,function(g){e.push(g);b(c,e,f)})}else{if(typeof f==="function"){f(e)}}};return a});